<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Running routes inside Red Hat Fuse Tooling</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="RiderDevPart.html" title="Developing Applications"><link rel="prev" href="RiderDevPart.html" title="Developing Applications"><link rel="next" href="RiderCamelDebugger.html" title="Debugging Routing Contexts"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RiderRunning"></a>Running routes inside Red Hat Fuse Tooling</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="RiderRunning.html#RiderRunningProfile">Running routes as a local Camel context</a></span></dt><dt><span class="section"><a href="RiderRunning.html#RiderRunningMaven">Running routes using Maven</a></span></dt><dt><span class="section"><a href="RiderRunning.html#RiderEditRunProfile">Working with runtime profiles</a></span></dt></dl></div><p>There are two ways to run your routes using the tooling:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderRunning.html#RiderRunningProfile" title="Running routes as a local Camel context">Running routes as a local Camel context</a></li><li class="listitem"><a class="xref" href="RiderRunning.html#RiderRunningMaven" title="Running routes using Maven">Running routes using Maven</a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="RiderRunningProfile"></a>Running routes as a local Camel context</h3></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_overview_10"></a>Overview</h4></div></div></div><p>The simplest way to run an Apache Camel route is as a <span class="strong"><strong>Local Camel
Context</strong></span>. This method enables you to launch the route directly from the
<span class="strong"><strong>Project Explorer</strong></span> view&#8217;s context menu. When you run a route from the
context menu, the tooling automatically creates a runtime profile for you. You can also create
a custom runtime profile for running your route.</p><p>Your route runs as if it were invoked directly from the command line and uses Apache Camel&#8217;s
embedded Spring container. You can configure a number of the runtime parameters by editing the
runtime profile.</p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_procedure_7"></a>Procedure</h4></div></div></div><p>To run a route as a local Camel context:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">In the <span class="strong"><strong>Project Explorer</strong></span> view, select a routing context
file.</li><li class="listitem"><p class="simpara">Right-click it to open the context menu, and then select <span class="strong"><strong>Run As</strong></span> &#8594; <span class="strong"><strong>Local Camel Context</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Selecting <span class="strong"><strong>Local Camel Context (without tests)</strong></span> directs the tooling
to run the project without performing validation tests, which may be faster.</p></td></tr></table></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_result"></a>Result</h4></div></div></div><p>The <span class="strong"><strong>Console</strong></span> view displays the output generated from running the
route.</p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_related_topics_3"></a>Related topics</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderRunning.html#RiderNewRunProfile" title="Editing a Local Camel Context runtime profile">Editing a Local Camel Context runtime profile</a></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="RiderRunningMaven"></a>Running routes using Maven</h3></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_overview_11"></a>Overview</h4></div></div></div><p>If the project containing your route is a Maven project, you can use the m2e plug-in to
run your route. Using this option, you can execute any Maven goals, before the route
runs.</p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_procedure_8"></a>Procedure</h4></div></div></div><p>To run a route using Maven:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">In the <span class="strong"><strong>Project Explorer</strong></span> view, select the root of the project
.</li><li class="listitem"><p class="simpara">Right-click it to open the context menu, and then select <span class="strong"><strong>Run As</strong></span> &#8594; <span class="strong"><strong>Maven build</strong></span>.</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">The first time you run the project using Maven, the <span class="strong"><strong>Edit Configuration and
launch</strong></span> editor opens, so you can create a Maven runtime
profile.</p><p class="simpara">To create the runtime profile, on the <span class="strong"><strong>Maven</strong></span> tab:</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">Make sure the route directory of your Apache Camel project appears in the
<span class="strong"><strong>Base directory:</strong></span> field.</p><p class="simpara">For example, on Linux the root of your project is similar to <code class="literal">~/workspace/simple-router</code>.</p></li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Goals:</strong></span> field, enter
<code class="literal">camel:run</code>.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>If you created your project using the Java DSL, enter
<code class="literal">exec:java</code> in the <span class="strong"><strong>Goals:</strong></span> field.</p></td></tr></table></div></li><li class="listitem">Click <span class="strong"><strong>Apply</strong></span> and then <span class="strong"><strong>Run</strong></span>.</li></ol></div></li><li class="listitem">Subsequent Maven runs use this profile, unless you modify it between runs.</li></ol></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_results"></a>Results</h4></div></div></div><p>The <span class="strong"><strong>Console</strong></span> view displays the output from the Maven run.</p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_related_topics_4"></a>Related topics</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderRunning.html#RiderMvnRunProfile" title="Editing a Maven runtime profile">Editing a Maven runtime profile</a></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="RiderEditRunProfile"></a>Working with runtime profiles</h3></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="RiderRunning.html#RiderNewRunProfile">Editing a Local Camel Context runtime profile</a></span></dt><dt><span class="section"><a href="RiderRunning.html#RiderMvnRunProfile">Editing a Maven runtime profile</a></span></dt></dl></div><p>Red Hat Fuse Tooling stores information
about the runtime environments for each project in <span class="emphasis"><em>runtime profiles</em></span>.
The runtime profiles keep track of such information as which Maven goals to call, the Java
runtime environment to use, any system variables that need to be set, and so on. A project
can have more than one runtime profile.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="RiderNewRunProfile"></a>Editing a Local Camel Context runtime profile</h4></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_overview_12"></a>Overview</h5></div></div></div><p>A <span class="strong"><strong>Local Camel Context</strong></span> runtime profile configures how Apache Camel is
invoked to execute a route. A <span class="strong"><strong>Local Camel Context</strong></span> runtime profile
stores the name of the context file in which your routes are defined, the name of the
<code class="literal">main</code> to invoke, the command line options passed into the JVM,
the JRE to use, the classpath to use, any environment variables that need to be set, and
a few other pieces of information.</p><p>The runtime configuration editor for a <span class="strong"><strong>Local Camel Context</strong></span> runtime
profile contains the following tabs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>Camel Context File</strong></span>&#8201;&#8212;&#8201;specifies the name of the new
configuration and the full path of the routing context file that contains your
routes.</li><li class="listitem"><span class="strong"><strong>JMX</strong></span>&#8201;&#8212;&#8201;specifies JMX connection details, including the JMX
URI and the user name and password (optional) to use to access it.</li><li class="listitem"><span class="strong"><strong>Main</strong></span>&#8201;&#8212;&#8201;specifies the fully qualified name of the project&#8217;s
base directory, a few options for locating the base directory, any goals required to
execute before running the route, and the version of the Maven runtime to use.</li><li class="listitem"><span class="strong"><strong>JRE</strong></span>&#8201;&#8212;&#8201;specifies the JRE and command line arguments to use
when starting the JVM.</li><li class="listitem"><span class="strong"><strong>Refresh</strong></span>&#8201;&#8212;&#8201;specifies how Maven refreshes the project&#8217;s
resource files after a run terminates.</li><li class="listitem"><span class="strong"><strong>Environment</strong></span>&#8201;&#8212;&#8201;specifies any environment variables that
need to be set.</li><li class="listitem"><span class="strong"><strong>Common</strong></span>&#8201;&#8212;&#8201;specifies how the profile is stored and the output
displayed.</li></ul></div><p>The first time an Apache Camel route is run as a <span class="strong"><strong>Local Camel Context</strong></span>,
Red Hat Fuse Tooling creates for the routing context
file a default runtime profile, which should not require editing.</p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_accessing_the_local_camel_context_s_runtime_configuration_editor"></a>Accessing the Local Camel Context&#8217;s runtime configuration editor</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">In the <span class="strong"><strong>Project Explorer</strong></span> view, select the Camel context file for which you
want to edit or create a custom runtime profile.</li><li class="listitem">Right-click it to open the context menu, and then select <span class="strong"><strong>Run As</strong></span> &#8594; <span class="strong"><strong>Run Configurations</strong></span> to open
the <span class="strong"><strong>Run Configurations</strong></span> dialog.</li><li class="listitem">In the <span class="strong"><strong>context selection</strong></span> pane, select <span class="strong"><strong>Local Camel Context</strong></span>, and then click
<span class="inlinemediaobject"><img src="./images/NewRunConfigButton.jpg" alt="New profile icon"></span> at the top, left of the <span class="strong"><strong>context
selection</strong></span> pane.</li><li class="listitem">In the <span class="strong"><strong>Name</strong></span> field, enter a new name for your runtime profile.</li></ol></div><div class="figure"><a name="runConfigsLCC"></a><p class="title"><b>Figure&nbsp;7.&nbsp;Runtime configuration editor for Local Camel Context</b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/LCCruntimeCnfg.png" alt="Local camel context runtime configuration editor"></div></div></div><br class="figure-break"></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_setting_the_camel_context_file"></a>Setting the camel context file</h5></div></div></div><p>The <span class="strong"><strong>Camel Context File</strong></span> tab has one field, <span class="strong"><strong>Select
Camel Context file&#8230;&#8203;</strong></span>. Enter the full path to the routing context file that
contains your route definitions.</p><p>The <span class="strong"><strong>Browse</strong></span> button accesses the <span class="strong"><strong>Open
Resource</strong></span> dialog, which facilitates locating the target routing context file. This
dialog is preconfigured to search for files that contain Apache Camel routes.</p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_changing_the_command_line_options"></a>Changing the command line options</h5></div></div></div><p>By default the only command line option passed to the JVM is:</p><pre class="screen">-fa <span class="emphasis"><em>context-file</em></span></pre><p>If you are using a custom main class you may need to pass in different options. To do so,
on the <span class="strong"><strong>Main</strong></span> tab, click the <span class="strong"><strong>Add</strong></span> button to enter a
parameter&#8217;s name and value. You can click the <span class="strong"><strong>Add Parameter</strong></span> dialog&#8217;s
<span class="strong"><strong>Variables&#8230;&#8203;</strong></span> button to display a list of variables that you can
select.</p><p>To add or modify JVM-specific arguments, edit the <span class="strong"><strong>VM arguments</strong></span> field
on the <span class="strong"><strong>JRE</strong></span> tab.</p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_changing_where_output_is_sent"></a>Changing where output is sent</h5></div></div></div><p>By default, the output generated from running the route is sent to the
<span class="strong"><strong>Console</strong></span> view. But you can redirect it to a file instead.</p><p>To redirect output to a file:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Select the <span class="strong"><strong>Common</strong></span> tab.</li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Standard Input and Output</strong></span> pane, click the checkbox next
to the <span class="strong"><strong>Output File:</strong></span> field, and then enter the path to the
file where you want to send the output.</p><p class="simpara">The <span class="strong"><strong>Workspace</strong></span>, <span class="strong"><strong>File System</strong></span>, and
<span class="strong"><strong>Variables</strong></span> buttons facilitate building the path to
the output file.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_related_topics_5"></a>Related topics</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderRunning.html#RiderRunningProfile" title="Running routes as a local Camel context">Running routes as a local Camel context</a></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="RiderMvnRunProfile"></a>Editing a Maven runtime profile</h4></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_overview_13"></a>Overview</h5></div></div></div><p>A Maven runtime profile configures how Maven invokes Apache Camel. A Maven runtime profile
stores the Maven goals to execute, any Maven profiles to use, the version of Maven to
use, the JRE to use, the classpath to use, any environment variables that need to be
set, and a few other pieces of information.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>The first time an Apache Camel route is run using Maven, you must create a default runtime
profile for it.</p></td></tr></table></div><p>The runtime configuration editor for a Fuse runtime profile contains the following
tabs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>Main</strong></span>&#8201;&#8212;&#8201;specifies the name of the new configuration, the fully
qualified name of the project&#8217;s base directory, a few options for locating the base
directory, any goals required to execute before running the route, and the version of the
Maven runtime to use.</li><li class="listitem"><span class="strong"><strong>JRE</strong></span>&#8201;&#8212;&#8201;specifies the JRE and command line arguments to use
when starting the JVM.</li><li class="listitem"><span class="strong"><strong>Refresh</strong></span>&#8201;&#8212;&#8201;specifies how Maven refreshes the project&#8217;s
resource files after a run terminates.</li><li class="listitem"><span class="strong"><strong>Source</strong></span>&#8201;&#8212;&#8201;specifies the location of any additional sources
that the project requires.</li><li class="listitem"><span class="strong"><strong>Environment</strong></span>&#8201;&#8212;&#8201;specifies any environment variables that
need to be set.</li><li class="listitem"><span class="strong"><strong>Common</strong></span>&#8201;&#8212;&#8201;specifies how the profile is stored and the output
displayed.</li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_accessing_the_maven_runtime_configuration_editor"></a>Accessing the Maven runtime configuration editor</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">In the <span class="strong"><strong>Project Explorer</strong></span> view, select the root of the project for which
you want to edit or create a custom runtime profile.</li><li class="listitem">Right-click it to open the context menu, and then select <span class="strong"><strong>Run As</strong></span> &#8594; <span class="strong"><strong>Run Configurations</strong></span> to open the <span class="strong"><strong>Run Configurations</strong></span> dialog.</li><li class="listitem">In the <span class="strong"><strong>context selection</strong></span> pane, select <span class="strong"><strong>Maven Build</strong></span>, and then click
<span class="inlinemediaobject"><img src="./images/NewRunConfigButton.jpg" alt="New profile icon"></span> at the top, left of the <span class="strong"><strong>context
selection</strong></span> pane.</li></ol></div><div class="figure"><a name="runConfigsMV"></a><p class="title"><b>Figure&nbsp;8.&nbsp;Runtime configuration editor for Maven</b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/m2RunConfig.png" alt="Maven runtime configuration editor"></div></div></div><br class="figure-break"></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_changing_the_maven_goal"></a>Changing the Maven goal</h5></div></div></div><p>The most commonly used goal when running a route is <span class="strong"><strong>camel:run</strong></span>. It loads the
routes into a Spring container running in its own JVM.</p><p>The Apache Camel plug-in also supports a <span class="strong"><strong>camel:embedded</strong></span> goal that loads the
Spring container into the same JVM used by Maven. The advantage of this is that the
routes should bootstrap faster.</p><p>Projects based on Java DSL use the <span class="strong"><strong>exec:java</strong></span> goal.</p><p>If your POM contains other goals, you can change the Maven goal used by clicking the
<span class="strong"><strong>Configure&#8230;&#8203;</strong></span> button next to the <span class="strong"><strong>Maven Runtime</strong></span> field on the <span class="strong"><strong>Main</strong></span> tab. On
the <span class="strong"><strong>Installations</strong></span> dialog, you edit the <span class="strong"><strong>Global settings for &lt;selected_runtime&gt; installation</strong></span> field.</p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_changing_the_version_of_maven"></a>Changing the version of Maven</h5></div></div></div><p>By default, Red Hat Fuse Tooling for Eclipse uses m2e, which is embedded in Eclipse. If you want to use a different
version of Maven or have a newer version installed on your development machine, you can
select it from the <span class="strong"><strong>Maven Runtime</strong></span> drop-down menu on the
<span class="strong"><strong>Main</strong></span> tab.</p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_changing_where_the_output_is_sent"></a>Changing where the output is sent</h5></div></div></div><p>By default, the output from the route execution is sent to the
<span class="strong"><strong>Console</strong></span> view. But you can redirect it to a file instead.</p><p>To redirect output to a file:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Select the <span class="strong"><strong>Common</strong></span> tab.</li><li class="listitem"><p class="simpara">Click the checkbox next to the <span class="strong"><strong>Output File:</strong></span> field, and then enter
the path to the file where you want to send the output.</p><p class="simpara">The <span class="strong"><strong>Workspace</strong></span>, <span class="strong"><strong>File System</strong></span>, and
<span class="strong"><strong>Variables</strong></span> buttons facilitate building the path to
the output file.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="_related_topics_6"></a>Related topics</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderRunning.html#RiderRunningMaven" title="Running routes using Maven">Running routes using Maven</a></li></ul></div></div></div></div></div></body></html>