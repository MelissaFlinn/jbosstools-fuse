<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Adding global endpoints, data formats, or beans</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="RiderEditRoute.html" title="Editing a routing context in the route editor"><link rel="prev" href="RiderDevPart.html" title="Developing Applications"><link rel="next" href="RiderCamelDebugger.html" title="Debugging Routing Contexts"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="RiderAddGlobalCnfg"></a>Adding global endpoints, data formats, or beans</h3></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_overview_7"></a>Overview</h4></div></div></div><p>Some routes rely on shared configuration provided by global endpoints, global data
formats, or global beans. You can add global elements to the project&#8217;s routing context
file by using the route editor&#8217;s <span class="strong"><strong>Configurations</strong></span> tab.</p><p>To add global elements to your routing context file:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Open your routing context file in the route editor.</li><li class="listitem"><p class="simpara">At the bottom of the route editor, click the
<span class="strong"><strong>Configurations</strong></span> tab to display global configurations, if
there are any.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/ConfigurationsView.png" alt="ConfigurationsView"></div></div></li><li class="listitem"><p class="simpara">Click <span class="strong"><strong>Add</strong></span> to open the <span class="strong"><strong>Create a new global element</strong></span>
dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVAddButton.png" alt="CnfigsVAddButton"></div></div><p class="simpara">The options are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Endpoint&#8201;&#8212;&#8201;see <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalEndpoint" title="Adding a global endpoint">Adding a global endpoint</a>.</li><li class="listitem">Data Format&#8201;&#8212;&#8201;see <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalDF" title="Adding a global data format">Adding a global data format</a>.</li><li class="listitem">Bean&#8201;&#8212;&#8201;see <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalBean" title="Adding a global bean">Adding a global bean</a>.</li></ul></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="selectGlobalEndpoint"></a>Adding a global endpoint</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Create a new global element</strong></span> dialog, select
<span class="strong"><strong>Endpoint</strong></span> and
click <span class="strong"><strong>OK</strong></span> to open the <span class="strong"><strong>Select component</strong></span>
dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVSelectCamComponent1.png" alt="CnfigsVSelectCamComponent1"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>By default, the <span class="strong"><strong>Select component</strong></span> dialog opens with the <span class="strong"><strong>Show
only palette components</strong></span> option enabled. To see all
available components, uncheck this option.</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The <span class="strong"><strong>Grouped by categories</strong></span> option groups components by type.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVSelectCamComponentGrouped.png" alt="CnfigsVSelectCamComponentGrouped"></div></div></td></tr></table></div></li><li class="listitem"><p class="simpara"><a name="globalEndptSelect"></a>In the <span class="strong"><strong>Select component</strong></span> dialog, scroll through the list
of Camel components to find and select the component you want to add to the
context file, and then enter an ID for it in the <span class="strong"><strong>Id</strong></span>
field.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVCamComponentSelected.png" alt="CnfigsVCamComponentSelected"></div></div><p class="simpara">In this example, the JMS component is selected and
<code class="literal">myJMS</code> is the <span class="strong"><strong>Id</strong></span> value.</p></li><li class="listitem"><p class="simpara">Click <span class="strong"><strong>Finish</strong></span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVmyEndptAdded2.png" alt="CnfigsVmyEndptAdded2"></div></div><p class="simpara">You can now set properties in the <span class="strong"><strong>Properties</strong></span> view as
needed.</p><p class="simpara">The tooling autofills <span class="strong"><strong>Id</strong></span> with the value you entered in
the component&#8217;s <code class="literal">Id</code> field in <a class="xref" href="RiderAddGlobalCnfg.html#globalEndptSelect">[globalEndptSelect]</a>. In this example, Camel builds the
<code class="literal">uri</code> (required field) starting with the component&#8217;s
schema (in this case, <code class="literal">jms:</code>), but you must specify the
<span class="strong"><strong>destinationName</strong></span> and the <span class="strong"><strong>destinationType</strong></span> to
complete the component&#8217;s <span class="strong"><strong>uri</strong></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>For the JMS component, the destination type defaults to <code class="literal">queue</code>. This default value
does not appear in the <code class="literal">uri</code> field on the
<span class="strong"><strong>Details</strong></span> page until you have entered a value in
<span class="strong"><strong>Destination Name</strong></span> (required field).</p></td></tr></table></div></li><li class="listitem">To complete the component&#8217;s uri, click <span class="strong"><strong>Advanced</strong></span>.</li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Destination Name</strong></span> field, enter the name of the
destination endpoint (for example, <code class="literal">FOO.BAR</code>). In the
<span class="strong"><strong>Destination Type</strong></span> field, enter the endpoint
destination&#8217;s type (for example, <code class="literal">queue</code>, <code class="literal">topic</code>, <code class="literal">temp:queue</code>, or
<code class="literal">temp:topic</code>).</p><div class="informalfigure"><div class="mediaobject"><img src="./images/JMSCompAdvanPathProp.png" alt="JMSCompAdvanPathProp"></div></div><p class="simpara">The <span class="strong"><strong>Properties</strong></span> view&#8217;s <span class="strong"><strong>Details</strong></span> and
<span class="strong"><strong>Advanced</strong></span> tabs provide access to all properties
available for configuring a particular component.</p></li><li class="listitem"><p class="simpara">Click the <span class="strong"><strong>Consumer (advanced)</strong></span> tab.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/JMSCompConsumerAdvanProps2.png" alt="JMSCompConsumerAdvanProps2"></div></div><p class="simpara">Enable the properties <span class="strong"><strong>Eager Loading Of
Properties</strong></span> and <span class="strong"><strong>Expose Listener
Session</strong></span>.</p></li><li class="listitem"><p class="simpara">In the route editor, switch to the <span class="strong"><strong>Source</strong></span> tab to see the
code that the tooling added to the context file (in this example, a configured
JMS endpoint), before the first route element.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsEndptSourceView.png" alt="CnfigsEndptSourceView"></div></div></li><li class="listitem">When done, save your changes by selecting <span class="strong"><strong>File</strong></span> &#8594; <span class="strong"><strong>Save</strong></span> on the menu bar.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="selectGlobalDF"></a>Adding a global data format</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Create a new global element</strong></span> dialog, select
<span class="strong"><strong>Data Format</strong></span> and click <span class="strong"><strong>OK</strong></span>
to open the <span class="strong"><strong>Create a global Data
Format</strong></span> dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVCreateGlobalDF1.png" alt="CnfigsVCreateGlobalDF1"></div></div><p class="simpara">The data format defaults to <code class="literal">avro</code>, the format at the top of
the list of those available.</p></li><li class="listitem">Open the <span class="strong"><strong>Data Format</strong></span> drop-down menu, and select the
format you want, for example, <code class="literal">xmljson</code>.</li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Id</strong></span> field, enter a name for the format, for example,
<span class="emphasis"><em>myDataFormat</em></span>).</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVCreateGlobalDF2.png" alt="CnfigsVCreateGlobalDF2"></div></div></li><li class="listitem"><p class="simpara">Click <span class="strong"><strong>Finish</strong></span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEditGlobalDFprops1.png" alt="CnfigsVEditGlobalDFprops1"></div></div></li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Properties</strong></span> view, set property values as
appropriate for your project, for example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEditGlobalDFprops2.png" alt="CnfigsVEditGlobalDFprops2"></div></div></li><li class="listitem"><p class="simpara">In the route editor, click the <span class="strong"><strong>Source</strong></span> tab to see the code
that the tooling added to the context file. In this example, a configured
xmljson data format is before the first route
element.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVGlobalDFSourceV.png" alt="CnfigsVGlobalDFSourceV"></div></div></li><li class="listitem">When done, save your changes by selecting <span class="strong"><strong>File</strong></span> &#8594; <span class="strong"><strong>Save</strong></span> on the menu bar.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="selectGlobalBean"></a>Adding a global bean</h4></div></div></div><p>A global bean enables out-of-route bean definitions that can be referenced from
anywhere in the route. When you copy a <span class="strong"><strong>Bean</strong></span> component from the
palette to the route, you can find defined global beans in the
<span class="strong"><strong>Properties</strong></span> view&#8217;s <span class="strong"><strong>Ref</strong></span> dropdown. Select the
global bean that you want the <span class="strong"><strong>Bean</strong></span> component to reference.</p><p>To add a global bean element:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Create a new global element</strong></span> window, select
<span class="strong"><strong>Bean</strong></span> and click <span class="strong"><strong>OK</strong></span> to open the
<span class="strong"><strong>Bean Definition</strong></span> dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVCreateGlobalBean1.png" alt="CnfigsVCreateGlobalBean1"></div></div></li><li class="listitem">In the <span class="strong"><strong>Id</strong></span> field, enter an ID for the global bean, for example,
<span class="strong"><strong>TransformBean</strong></span>. The ID must be unique in the
configuration.</li><li class="listitem"><p class="simpara">Identify a bean class or a factory bean.</p><p class="simpara">To specify a factory bean, you must have already added another global bean
with a factory class specified. You can then select that global bean to
declare it as a global bean factory. One instance of the bean factory class
will be in the runtime. Other global beans can call factory methods on that
class to create their own instances of other classes.</p><p class="simpara">To fill the <span class="strong"><strong>Class</strong></span> field, do one of the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Enter the name of a class that is in the project or in a referenced project.</li><li class="listitem">Click  <span class="strong"><strong>&#8230;&#8203;</strong></span> to navigate to and select a class that is
in the project or in a referenced project.</li><li class="listitem">Click <span class="strong"><strong>+</strong></span> to define a new bean class
and add it as a global bean.</li></ul></div></li><li class="listitem"><p class="simpara">If the bean you are adding requires one or more arguments, in the <span class="strong"><strong>Constructor
Arguments</strong></span> section, for each argument:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">Click <span class="strong"><strong>Add</strong></span>.</li><li class="listitem">Optionally, in the <span class="strong"><strong>Type</strong></span> field, enter the type
of the argument. The default is <code class="literal">java.lang.String</code>.</li><li class="listitem">In the <span class="strong"><strong>Value</strong></span> field, enter the value of the
argument.</li><li class="listitem">Click <span class="strong"><strong>OK</strong></span>.</li></ol></div></li><li class="listitem"><p class="simpara">Optionally specify one or more properties that are accessible to the global bean. In the
<span class="strong"><strong>Bean Properties</strong></span> section, do the following for each property:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">Click <span class="strong"><strong>Add</strong></span>.</li><li class="listitem">In the <span class="strong"><strong>Name</strong></span> field, enter the name of the
property.</li><li class="listitem">In the <span class="strong"><strong>Value</strong></span> field, enter the value of the
property.</li><li class="listitem">Click <span class="strong"><strong>OK</strong></span>.</li></ol></div></li><li class="listitem"><p class="simpara">Click <span class="strong"><strong>Finish</strong></span> to add the global bean to the configuration. The global bean
ID you specified appears in the <span class="strong"><strong>Configurations</strong></span> tab, for
example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsBeanInList.png" alt="CnfigsBeanInList"></div></div></li><li class="listitem"><p class="simpara">Switch to the <span class="strong"><strong>Source</strong></span> tab to see the <code class="literal">bean</code> element that the
tooling added to the context file. For example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsBeanSourceV.png" alt="CnfigsBeanSourceV"></div></div></li><li class="listitem"><p class="simpara">Click the <span class="strong"><strong>Configurations</strong></span> tab to return to the list of global elements and
select a global bean to display its standard properties in the
<span class="strong"><strong>Properties</strong></span> view, for example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsBeanProperties.png" alt="CnfigsBeanProperties"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To view or edit a property that you specified when you added a global bean, select the bean in
the <span class="strong"><strong>Configurations</strong></span> tab and then click
<span class="strong"><strong>Edit</strong></span>.</p></td></tr></table></div></li><li class="listitem"><p class="simpara">Set global bean properties as needed:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>Depends-on</strong></span> is a string that you can use to identify a bean that must be
created before this global bean. Specify the ID (name) of the depended
on bean. For example, if you are adding the <code class="literal">TransformBean</code>
and you set <span class="strong"><strong>Depends-on</strong></span> to
<code class="literal">ChangeCaseBean</code> then <code class="literal">ChangeCaseBean</code> must be
created and then <code class="literal">TransformBean</code> can be created. When the
beans are being destroyed then <code class="literal">TransformBean</code> is destroyed
first.</li><li class="listitem"><span class="strong"><strong>Factory-method</strong></span> is useful only when the global bean is a factory class. In
this situation, specify or select a static factory method to be called
when the bean is referenced.</li><li class="listitem"><span class="strong"><strong>Scope</strong></span> is <code class="literal">singleton</code> or
<code class="literal">prototype</code>. The default,
<code class="literal">singleton</code>, indicates that Camel uses the same
instance of the bean each time the bean is called. Specify
<code class="literal">prototype</code> when you want Camel to create a new
instance of the bean each time the bean is called.</li><li class="listitem"><span class="strong"><strong>Init-method</strong></span> lets you specify or select which of the bean&#8217;s <code class="literal">init()</code> methods to
call when the bean is referenced.</li><li class="listitem"><span class="strong"><strong>Destroy-method</strong></span> lets you specify or select which of the bean&#8217;s destory methods to call
when the processing performed by the bean is done.</li></ul></div></li><li class="listitem">When done, save your changes by selecting <span class="strong"><strong>File</strong></span> &#8594; <span class="strong"><strong>Save</strong></span> on the menu bar.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="deleteGlobalComponent"></a>Deleting a global element</h4></div></div></div><p>The procedure is the same whether removing an endpoint, data format or bean that was
previously added to the routing context.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You cannot perform an undo operation for deletion of a global element. If you inadvertently
delete a global element that you want to keep in the configuration you might be able
to undo the deletion by closing the context file without saving it. If this is not
feasible then re-add the inadvertently deleted global element.</p></td></tr></table></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Configurations</strong></span> tab, select the global element
that you want to delete.</p><p class="simpara">For example, suppose you want to delete the data format
<code class="literal">myDataFormat</code> that was added in <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalDF" title="Adding a global data format">Adding a global data format</a>:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVDFSelectDelete.png" alt="CnfigsVDFSelectDelete"></div></div></li><li class="listitem"><p class="simpara">Click <span class="strong"><strong>Delete</strong></span>.</p><p class="simpara">The global element <code class="literal">myDataFormat</code> disappears from the
<span class="strong"><strong>Configurations</strong></span> tab.</p></li><li class="listitem"><p class="simpara">Switch to the <span class="strong"><strong>Source</strong></span> tab to check that the tooling
removed the XML code from the routing context.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsDelDFSourceV.png" alt="CnfigsDelDFSourceV"></div></div></li><li class="listitem">When done, save your changes by selecting <span class="strong"><strong>File</strong></span> &#8594; <span class="strong"><strong>Save</strong></span> on the menu bar.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="editGlobalComponent"></a>Editing a global element</h4></div></div></div><p>The procedure is the same whether modifying the properties of an endpoint, data format
or bean that you added to the routing context.</p><p>Typically, you do not want to change the ID of a global element. If the global element is
already in use in a running route, changing the ID can break references to the
global element.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Configurations</strong></span> tab, select the global element that
you want to edit.</p><p class="simpara">For example, to edit the endpoint <code class="literal">myJMS</code> that was added in
<a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalEndpoint" title="Adding a global endpoint">Adding a global endpoint</a>, select it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEndptEditSelect.png" alt="CnfigsVEndptEditSelect"></div></div></li><li class="listitem"><p class="simpara">Click <span class="strong"><strong>Edit</strong></span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEndptClickEdit.png" alt="CnfigsVEndptClickEdit"></div></div><p class="simpara">In the <span class="strong"><strong>Properties</strong></span> view, modify the element&#8217;s properties
as needed.</p></li><li class="listitem"><p class="simpara">For example, open the <span class="strong"><strong>Advanced</strong></span> &#8594; <span class="strong"><strong>Consumer</strong></span> tab, and change the value of <span class="strong"><strong>Concurrent Consumers</strong></span> to <code class="literal">2</code>:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsEditEndpntConcurConsume2.png" alt="CnfigsEditEndpntConcurConsume2"></div></div></li><li class="listitem"><p class="simpara">In the route editor, click the <span class="strong"><strong>Source</strong></span> tab and check that
the tooling added the property <code class="literal">concurrentConsumers=2</code> to the routing
context:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEndptEditSourceV.png" alt="CnfigsVEndptEditSourceV"></div></div></li><li class="listitem">When done, save your changes by selecting <span class="strong"><strong>File</strong></span> &#8594; <span class="strong"><strong>Save</strong></span> on the menu bar.</li></ol></div></div></div></body></html>