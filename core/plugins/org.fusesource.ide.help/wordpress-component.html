<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Wordpress Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="websocket-component.html" title="Jetty Websocket Component"><link rel="next" href="xchange-component.html" title="XChange Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="wordpress-component"></a>Wordpress Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="wordpress-component.html#_options_165">Options</a></span></dt><dt><span class="section"><a href="wordpress-component.html#_authentication_3">Authentication</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.21</strong></span></p><p>Camel component for <a class="link" href="https://developer.wordpress.org/rest-api/reference/" target="_top">Wordpress API</a>.</p><p>Currently only the <span class="strong"><strong>Posts</strong></span> and <span class="strong"><strong>Users</strong></span> operations are supported.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_165"></a>Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="wordpress-component.html#_path_parameters_2_parameters_51">Path Parameters (2 parameters):</a></span></dt><dt><span class="section"><a href="wordpress-component.html#_query_parameters_11_parameters_10">Query Parameters (11 parameters):</a></span></dt><dt><span class="section"><a href="wordpress-component.html#_configuring_wordpress_component">Configuring Wordpress component</a></span></dt><dt><span class="section"><a href="wordpress-component.html#_consumer_example_4">Consumer Example</a></span></dt><dt><span class="section"><a href="wordpress-component.html#_producer_example_4">Producer Example</a></span></dt></dl></div><p>The Wordpress component supports 2 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>configuration</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Wordpress component configuration</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>WordpressComponent Configuration</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>resolveProperty Placeholders</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Whether the component should resolve property placeholders on itself when starting. Only properties which are of String type can use property placeholders.</p></td><td align="center" valign="top"><p>true</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div><p>The Wordpress endpoint is configured using URI syntax:</p><pre class="screen">wordpress:operation</pre><p>with the following path and query parameters:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_path_parameters_2_parameters_51"></a>Path Parameters (2 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>operation</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The endpoint operation.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>operationDetail</strong></span></p></td><td align="left" valign="top"><p>The second part of an endpoint operation. Needed only when endpoint semantic is not enough, like wordpress:post:delete</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_query_parameters_11_parameters_10"></a>Query Parameters (11 parameters):</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="51%" class="col_2"><col width="10%" class="col_3"><col width="20%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="center" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>apiVersion</strong></span> (common)</p></td><td align="left" valign="top"><p>The Wordpress REST API version</p></td><td align="center" valign="top"><p>2</p></td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>criteria</strong></span> (common)</p></td><td align="left" valign="top"><p>The criteria to use with complex searches.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>Map</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>force</strong></span> (common)</p></td><td align="left" valign="top"><p>Whether to bypass trash and force deletion.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>Boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>id</strong></span> (common)</p></td><td align="left" valign="top"><p>The entity id</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>Integer</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>password</strong></span> (common)</p></td><td align="left" valign="top"><p>Password from authorized user</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>url</strong></span> (common)</p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The Wordpress API URL from your site, e.g. <a class="link" href="http://myblog.com/wp-json/" target="_top">http://myblog.com/wp-json/</a></p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>user</strong></span> (common)</p></td><td align="left" valign="top"><p>Authorized user to perform writing operations</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>String</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>bridgeErrorHandler</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler, which mean any exceptions occurred while the consumer is trying to pickup incoming messages, or the likes, will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>exceptionHandler</strong></span> (consumer)</p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions, that will be logged at WARN or ERROR level and ignored.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ExceptionHandler</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>exchangePattern</strong></span> (consumer)</p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td><td align="center" valign="top">&nbsp;</td><td align="left" valign="top"><p>ExchangePattern</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>synchronous</strong></span> (advanced)</p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used, or Camel is allowed to use asynchronous processing (if supported).</p></td><td align="center" valign="top"><p>false</p></td><td align="left" valign="top"><p>boolean</p></td></tr></tbody></table></div><p>Most of parameters needed when performing a read operation mirrors from the official <a class="link" href="https://developer.wordpress.org/rest-api/reference/" target="_top">API</a>. When performing searches operations, the <code class="literal">criteria.</code> suffix is needed. Take the following <code class="literal">Consumer</code> as example:</p><pre class="screen">wordpress:post?criteria.perPage=10&amp;criteria.orderBy=author&amp;criteria.categories=camel,dozer,json</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_configuring_wordpress_component"></a>Configuring Wordpress component</h3></div></div></div><p>The <code class="literal">WordpressConfiguration</code> class can be used to set initial properties configuration to the component instead of passing it as query parameter. The following listing shows how to set the component to be used in your routes.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() {
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">final</strong> WordpressConfiguration configuration = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> WordpressConfiguration();
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">final</strong> WordpressComponent component = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> WordpressComponent();
    configuration.setApiVersion(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"2"</em></strong>);
    configuration.setUrl(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http://yoursite.com/wp-json/"</em></strong>);
    component.setConfiguration(configuration);
    getContext().addComponent(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"wordpress"</em></strong>, component);

    from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"wordpress:post?id=1"</em></strong>)
      .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_consumer_example_4"></a>Consumer Example</h3></div></div></div><p>Consumer polls from the API from time to time domain objects from Wordpress. Following, an example using the <code class="literal">Post</code> operation:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">wordpress:post</code> retrieves posts (defaults to 10 posts)</li><li class="listitem"><code class="literal">wordpress:post?id=1</code> search for a specific post</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_producer_example_4"></a>Producer Example</h3></div></div></div><p>Producer performs write operations on Wordpress like adding a new user or update a post. To be able to write, you must have an authorized user credentials (see Authentication).</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">wordpress:post</code> creates a new post from the <code class="literal">org.apache.camel.component.wordpress.api.model.Post</code> class in the message body.</li><li class="listitem"><code class="literal">wordpress:post?id=1</code> updates a post based on data <code class="literal">org.apache.camel.component.wordpress.api.model.Post</code> from the message body.</li><li class="listitem"><code class="literal">wordpress:post:delete?id=1</code> deletes a specific post</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_authentication_3"></a>Authentication</h2></div></div></div><p>Producers that perform write operations (e.g. create a new post) <a class="link" href="https://developer.wordpress.org/rest-api/using-the-rest-api/authentication/" target="_top">must have an authenticated user</a> to do so. The standard authentication mechanism used by Wordpress is cookie. Unfortunately this method is not supported outside Wordpress environment because it&#8217;s rely on <a class="link" href="https://codex.wordpress.org/WordPress_Nonces" target="_top">nonce</a> internal function.</p><p>There&#8217;s some alternatives to use the Wordpress API without nonces, but requires specific plugin installations.</p><p>At this time, <code class="literal">camel-wordpress</code> only supports Basic Authentication (more to come). To configure it, you must install the <a class="link" href="https://github.com/WP-API/Basic-Auth" target="_top">Basic-Auth Wordpress plugin</a> and pass the credentials to the endpoint:</p><p><code class="literal">from("direct:deletePost").to("wordpress:post:delete?id=9&amp;user=ben&amp;password=password123").to("mock:resultDelete");</code></p><p><span class="strong"><strong>It&#8217;s not recommend to use Basic Authentication in production without TLS!!</strong></span></p></div></div></body></html>