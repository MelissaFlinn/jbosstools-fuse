<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Zip Deflate Compression DataFormat</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="zendesk-component.html" title="Zendesk Component"><link rel="next" href="zipfile-dataformat.html" title="Zip File DataFormat"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="zip-dataformat"></a>Zip Deflate Compression DataFormat</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="zip-dataformat.html#_options_177">Options</a></span></dt><dt><span class="section"><a href="zip-dataformat.html#_marshal_7">Marshal</a></span></dt><dt><span class="section"><a href="zip-dataformat.html#_unmarshal_8">Unmarshal</a></span></dt><dt><span class="section"><a href="zip-dataformat.html#_dependencies_73">Dependencies</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel version 2.12</strong></span></p><p>The Zip Data Format is a message compression and
de-compression format. Messages marshalled using Zip compression can be
unmarshalled using Zip decompression just prior to being consumed at the
endpoint. The compression capability is quite useful when you deal with
large XML and Text based payloads. It facilitates more optimal use of
network bandwidth while incurring a small cost in order to compress and
decompress payloads at the endpoint.</p><p>INFO:*About using with Files*
The Zip data format, does not (yet) have special support for files.
Which means that when using big files, the entire file content is loaded
into memory. This is subject to change in the future, to allow a streaming based
solution to have a low memory footprint.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_options_177"></a>Options</h2></div></div></div><p>The Zip Deflate Compression dataformat supports 2 options which are listed below.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="10%" class="col_3"><col width="60%" class="col_4"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>compressionLevel</strong></span></p></td><td align="left" valign="top"><p><code class="literal">-1</code></p></td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>To specify a specific compression between 0-9. -1 is default compression, 0 is no compression, and 9 is best compression.</p></td></tr><tr><td align="left" valign="top"><p><span class="strong"><strong>contentTypeHeader</strong></span></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML, or application/json for data formats marshalling to JSon etc.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_marshal_7"></a>Marshal</h2></div></div></div><p>In this example we marshal a regular text/XML payload to a compressed
payload employing zip compression <code class="literal">Deflater.BEST_COMPRESSION</code> and send
it an ActiveMQ queue called MY_QUEUE.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).marshal().zip(Deflater.BEST_COMPRESSION).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:queue:MY_QUEUE"</em></strong>);</pre><p>Alternatively if you would like to use the default setting you could
send it as</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).marshal().zip().to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:queue:MY_QUEUE"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_unmarshal_8"></a>Unmarshal</h2></div></div></div><p>In this example we unmarshal&nbsp;a zipped&nbsp;payload from an ActiveMQ queue
called MY_QUEUE&nbsp;to its original format,&nbsp;and forward it for&nbsp;processing&nbsp;to
the UnZippedMessageProcessor. Note that the compression Level employed
during the marshalling should be identical to the one employed during
unmarshalling to avoid errors.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:queue:MY_QUEUE"</em></strong>).unmarshal().zip().process(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> UnZippedMessageProcessor());&nbsp;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dependencies_73"></a>Dependencies</h2></div></div></div><p>This data format is provided in <span class="strong"><strong>camel-core</strong></span> so no additional
dependencies are needed.</p></div></div></body></html>